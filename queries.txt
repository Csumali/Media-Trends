INSERT INTO Customer (username, password, email, phonenumber, address1, address2, city, stateid, postalcode)
  VALUES ('user1', 'qwerty', 'user@gmail.com', '2029993333', '1234 street', '', 'seattle', 'WA', '');

UPDATE Customer
SET password = '$2', email = '$3', phonenumber = '$4', address1 = '$5', address2 = '$6', city = '$7', stateid = '$8', postalcode = '$9'
WHERE username = '$1';

INSERT INTO Watchrecord (customerid, videoid, watchtime)
VALUES ((SELECT Customer.id FROM Customer WHERE username = $1),
(SELECT Video.id FROM Video WHERE videonum = $2), $3);


SELECT y.videonum, y.name AS title, Language.name AS language, FilmStudio.name AS film_studio, y.views
FROM (
      SELECT Video.videonum, Video.name, Video.languageID, Video.uploaddate, Video.filmStudioID, x.views
      FROM (
            SELECT video.id, video.name, count(*) AS views
            FROM Video
            JOIN Watchrecord ON (Watchrecord.videoID = Video.id)
            GROUP BY Video.id, Video.name
          ) AS x
          LEFT JOIN Video ON (x.id = video.id)
  ) AS y
    JOIN Language ON (y.languageID = Language.id)
    LEFT JOIN FilmStudio ON (y.filmStudioID = FilmStudio.ID)
ORDER BY y.views DESC, y.uploaddate DESC
LIMIT 10;

SELECT firstname, lastname
FROM Actor
    JOIN VideoToActor ON (VideoToActor.actorID = Actor.id)
    JOIN Video ON (VideoToActor.videoID = Video.id)
WHERE Video.videonum = 'W000000001';

SELECT Genre.name
FROM Genre
    JOIN VideoToGenre ON (VideoToGenre.genreID = Genre.id)
    JOIN Video ON (VideoToGenre.videoID = Video.id)
WHERE Video.videonum = 'W000000001';

SELECT Genre.name, COUNT(*) AS VideosWatched
FROM Customer
	JOIN Watchrecord ON ( Watchrecord.customerid = Customer.id)
	JOIN Video ON ( Video.id = Watchrecord.videoid)
	JOIN Videotogenre ON ( Video.id = Videotogenre.videoid)
	JOIN Genre ON ( Videotogenre.genreid = Genre.id)
WHERE Customer.username = $1
GROUP BY Genre.ID
ORDER BY VideosWatched Desc
LIMIT 1;